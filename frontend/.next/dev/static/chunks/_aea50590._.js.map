{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kovalskyi/Desktop/Techshop/frontend/lib/api.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080/api';\n\ninterface ApiResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\n\nfunction getAuthToken(): string | null {\n  if (typeof window === 'undefined') return null\n  return localStorage.getItem('auth_token')\n}\n\nasync function fetchApi<T>(\n  endpoint: string,\n  options?: RequestInit\n): Promise<ApiResponse<T>> {\n  try {\n    const token = getAuthToken()\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json',\n      ...options?.headers,\n    }\n    \n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`\n    }\n    \n    const response = await fetch(`${API_BASE_URL}/${endpoint}`, {\n      ...options,\n      headers,\n      credentials: 'include',\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        error: data.error || 'Request failed',\n      };\n    }\n\n    return data;\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Network error',\n    };\n  }\n}\n\nexport const api = {\n  categories: {\n    getAll: () => fetchApi<Array<{ id: number; name: string; slug: string }>>('categories.php'),\n  },\n\n  products: {\n    getAll: (params?: {\n      category?: string;\n      price_min?: number;\n      price_max?: number;\n      brand?: string;\n      search?: string;\n    }) => {\n      const queryParams = new URLSearchParams();\n      if (params?.category) queryParams.append('category', params.category);\n      if (params?.price_min) queryParams.append('price_min', params.price_min.toString());\n      if (params?.price_max) queryParams.append('price_max', params.price_max.toString());\n      if (params?.brand) queryParams.append('brand', params.brand);\n      if (params?.search) queryParams.append('search', params.search);\n\n      const query = queryParams.toString();\n      return fetchApi<Array<any>>(`products.php${query ? `?${query}` : ''}`);\n    },\n    getById: (id: number | string) => fetchApi<any>(`product.php?id=${id}`),\n  },\n\n  auth: {\n    login: (email: string, password: string) =>\n      fetchApi<{\n        id: number;\n        name: string;\n        email: string;\n        role: string;\n      }>('auth.php?action=login', {\n        method: 'POST',\n        body: JSON.stringify({ email, password }),\n      }),\n\n    register: (data: {\n      name: string;\n      email: string;\n      password: string;\n      phone?: string;\n      address?: string;\n    }) =>\n      fetchApi<{\n        id: number;\n        name: string;\n        email: string;\n        role: string;\n      }>('auth.php?action=register', {\n        method: 'POST',\n        body: JSON.stringify(data),\n      }),\n\n    logout: () =>\n      fetchApi('auth.php?action=logout', {\n        method: 'POST',\n      }),\n\n    me: () =>\n      fetchApi<{\n        id: number;\n        name: string;\n        email: string;\n        role: string;\n      }>('auth.php?action=me'),\n  },\n\n  orders: {\n    create: (data: {\n      full_name: string;\n      phone: string;\n      email: string;\n      delivery_address: string;\n      items: Array<{\n        product_id: number;\n        quantity: number;\n      }>;\n    }) =>\n      fetchApi<{\n        id: number;\n        total: number;\n      }>('orders.php', {\n        method: 'POST',\n        body: JSON.stringify(data),\n      }),\n\n    getAll: () => fetchApi<Array<any>>('orders.php'),\n    \n    updateStatus: (id: number, status: string) =>\n      fetchApi<{ id: number; status: string }>('orders.php', {\n        method: 'PUT',\n        body: JSON.stringify({ id, status }),\n      }),\n    \n    delete: (id: number) =>\n      fetchApi<{ id: number }>(`orders.php?id=${id}`, {\n        method: 'DELETE',\n      }),\n  },\n\n  admin: {\n    products: {\n      create: (data: {\n        name: string;\n        price: number;\n        stock: number;\n        brand: string;\n        category_id: number;\n        description?: string;\n        image?: string;\n      }) =>\n        fetchApi<{ id: number }>('admin/products.php', {\n          method: 'POST',\n          body: JSON.stringify(data),\n        }),\n      \n      update: (data: {\n        id: number;\n        name: string;\n        price: number;\n        stock: number;\n        brand: string;\n        category_id: number;\n        description?: string;\n        image?: string;\n      }) =>\n        fetchApi<{ id: number }>('admin/products.php', {\n          method: 'PUT',\n          body: JSON.stringify(data),\n        }),\n      \n      delete: (id: number) =>\n        fetchApi<{ id: number }>(`admin/products.php?id=${id}`, {\n          method: 'DELETE',\n        }),\n    },\n    \n    categories: {\n      create: (data: { name: string; slug?: string }) =>\n        fetchApi<{ id: number }>('admin/categories.php', {\n          method: 'POST',\n          body: JSON.stringify(data),\n        }),\n      \n      update: (data: { id: number; name: string; slug?: string }) =>\n        fetchApi<{ id: number }>('admin/categories.php', {\n          method: 'PUT',\n          body: JSON.stringify(data),\n        }),\n      \n      delete: (id: number) =>\n        fetchApi<{ id: number }>(`admin/categories.php?id=${id}`, {\n          method: 'DELETE',\n        }),\n    },\n  },\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///Users/kovalskyi/Desktop/Techshop/frontend/lib/store.ts"],"sourcesContent":["\"use client\"\n\nimport { create } from \"zustand\"\nimport { persist } from \"zustand/middleware\"\nimport type { Product, CartItem, User, Order } from \"./data\"\nimport { api } from \"./api\"\n\ninterface StoreState {\n  // Cart\n  cart: CartItem[]\n  addToCart: (product: Product, quantity?: number, color?: string, memory?: string) => void\n  removeFromCart: (productId: string) => void\n  updateQuantity: (productId: string, quantity: number) => void\n  clearCart: () => void\n  getCartTotal: () => number\n  getCartCount: () => number\n\n  // Wishlist\n  wishlist: Product[]\n  addToWishlist: (product: Product) => void\n  removeFromWishlist: (productId: string) => void\n  isInWishlist: (productId: string) => boolean\n\n  // Auth\n  user: User | null\n  isAuthenticated: boolean\n  login: (email: string, password: string) => Promise<boolean>\n  register: (email: string, password: string, name: string) => Promise<boolean>\n  logout: () => void\n  updateProfile: (data: Partial<User>) => void\n  initAuth: (userData: { id: number; name: string; email: string; role: string }) => void\n  clearAuth: () => void\n\n  // Orders\n  orders: Order[]\n  createOrder: (address: string) => Promise<Order | null>\n  loadOrders: () => Promise<void>\n}\n\nexport const useStore = create<StoreState>()(\n  persist(\n    (set, get) => ({\n      // Cart\n      cart: [],\n      addToCart: (product, quantity = 1, color, memory) => {\n        set((state) => {\n          const existingItem = state.cart.find(\n            (item) => item.product.id === product.id && item.selectedColor === color && item.selectedMemory === memory,\n          )\n          if (existingItem) {\n            return {\n              cart: state.cart.map((item) =>\n                item.product.id === product.id && item.selectedColor === color && item.selectedMemory === memory\n                  ? { ...item, quantity: item.quantity + quantity }\n                  : item,\n              ),\n            }\n          }\n          return {\n            cart: [...state.cart, { product, quantity, selectedColor: color, selectedMemory: memory }],\n          }\n        })\n      },\n      removeFromCart: (productId) => {\n        set((state) => ({\n          cart: state.cart.filter((item) => item.product.id !== productId),\n        }))\n      },\n      updateQuantity: (productId, quantity) => {\n        set((state) => ({\n          cart: state.cart.map((item) =>\n            item.product.id === productId ? { ...item, quantity: Math.max(1, quantity) } : item,\n          ),\n        }))\n      },\n      clearCart: () => set({ cart: [] }),\n      getCartTotal: () => {\n        const { cart } = get()\n        return cart.reduce((total, item) => total + item.product.price * item.quantity, 0)\n      },\n      getCartCount: () => {\n        const { cart } = get()\n        return cart.reduce((count, item) => count + item.quantity, 0)\n      },\n\n      // Wishlist\n      wishlist: [],\n      addToWishlist: (product) => {\n        set((state) => {\n          if (state.wishlist.find((p) => p.id === product.id)) return state\n          return { wishlist: [...state.wishlist, product] }\n        })\n      },\n      removeFromWishlist: (productId) => {\n        set((state) => ({\n          wishlist: state.wishlist.filter((p) => p.id !== productId),\n        }))\n      },\n      isInWishlist: (productId) => {\n        const { wishlist } = get()\n        return wishlist.some((p) => p.id === productId)\n      },\n\n      // Auth\n      user: null,\n      isAuthenticated: false,\n      login: async (email, password) => {\n        const response = await api.auth.login(email, password)\n        if (response.success && response.data) {\n          if (response.data.token && typeof window !== 'undefined') {\n            localStorage.setItem('auth_token', response.data.token)\n          }\n          set({\n            user: {\n              id: response.data.id.toString(),\n              email: response.data.email,\n              name: response.data.name,\n              role: response.data.role,\n              orders: [],\n            },\n            isAuthenticated: true,\n          })\n          return true\n        }\n        return false\n      },\n      register: async (email, password, name) => {\n        const response = await api.auth.register({ email, password, name })\n        if (response.success && response.data) {\n          if (response.data.token && typeof window !== 'undefined') {\n            localStorage.setItem('auth_token', response.data.token)\n          }\n          set({\n            user: {\n              id: response.data.id.toString(),\n              email: response.data.email,\n              name: response.data.name,\n              role: response.data.role,\n              orders: [],\n            },\n            isAuthenticated: true,\n          })\n          return true\n        }\n        return false\n      },\n      logout: async () => {\n        await api.auth.logout()\n        if (typeof window !== 'undefined') {\n          localStorage.removeItem('auth_token')\n        }\n        set({ user: null, isAuthenticated: false })\n      },\n      updateProfile: (data) => {\n        set((state) => ({\n          user: state.user ? { ...state.user, ...data } : null,\n        }))\n      },\n      initAuth: (userData) => {\n        set({\n          user: {\n            id: userData.id.toString(),\n            email: userData.email,\n            name: userData.name,\n            role: userData.role,\n            orders: [],\n          },\n          isAuthenticated: true,\n        })\n      },\n      clearAuth: () => {\n        set({ user: null, isAuthenticated: false })\n      },\n\n      // Orders\n      orders: [],\n      loadOrders: async () => {\n        const response = await api.orders.getAll()\n        if (response.success && response.data) {\n          const orders: Order[] = response.data.map((order: any) => ({\n            id: order.id.toString(),\n            items: (order.items || []).map((item: any) => ({\n              product: {\n                id: item.product_id.toString(),\n                name: item.name || 'Товар',\n                price: parseFloat(item.price),\n                image: `http://localhost:8080/images/${item.image || 'no-image.png'}`,\n                category: '',\n                inStock: true,\n                rating: 0,\n                reviews: 0,\n              },\n              quantity: item.quantity,\n            })),\n            total: order.total,\n            status: order.status === 'new' ? 'pending' : order.status === 'processing' ? 'processing' : order.status === 'completed' ? 'delivered' : 'pending',\n            date: order.created_at,\n            address: order.delivery_address,\n          }))\n          set({ orders })\n        }\n      },\n      createOrder: async (address) => {\n        const { cart, getCartTotal, user, clearCart } = get()\n        if (cart.length === 0) return null\n\n        if (!user) {\n          return null\n        }\n\n        const items = cart.map((item) => ({\n          product_id: parseInt(item.product.id),\n          quantity: item.quantity,\n        }))\n\n        const response = await api.orders.create({\n          full_name: user.name,\n          phone: user.phone || '',\n          email: user.email,\n          delivery_address: address,\n          items,\n        })\n\n        if (response.success && response.data) {\n          const order: Order = {\n            id: response.data.id.toString(),\n            items: [...cart],\n            total: response.data.total,\n            status: \"pending\",\n            date: new Date().toISOString(),\n            address,\n          }\n\n          set((state) => ({\n            orders: [order, ...state.orders],\n            user: state.user ? { ...state.user, orders: [order, ...state.user.orders] } : null,\n          }))\n\n          clearCart()\n          return order\n        }\n\n        return null\n      },\n    }),\n    {\n      name: \"lokistore-storage\",\n    },\n  ),\n)\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///Users/kovalskyi/Desktop/Techshop/frontend/components/auth-init.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect } from \"react\"\nimport { useStore } from \"@/lib/store\"\nimport { api } from \"@/lib/api\"\n\nexport function AuthInit() {\n  const initAuth = useStore((state) => state.initAuth)\n  const clearAuth = useStore((state) => state.clearAuth)\n\n  useEffect(() => {\n    async function loadAuth() {\n      if (typeof window === 'undefined') return\n      \n      const token = localStorage.getItem('auth_token')\n      if (token) {\n        try {\n          const response = await api.auth.me()\n          if (response.success && response.data) {\n            initAuth({\n              id: response.data.id,\n              name: response.data.name,\n              email: response.data.email,\n              role: response.data.role,\n            })\n            console.log('AuthInit: User loaded', { role: response.data.role })\n          } else {\n            localStorage.removeItem('auth_token')\n            clearAuth()\n          }\n        } catch (error) {\n          console.error('Auth init error:', error)\n          localStorage.removeItem('auth_token')\n          clearAuth()\n        }\n      } else {\n        clearAuth()\n      }\n    }\n    loadAuth()\n  }, [initAuth, clearAuth])\n\n  return null\n}\n\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,WAAW,IAAA,2HAAQ;uCAAC,CAAC,QAAU,MAAM,QAAQ;;IACnD,MAAM,YAAY,IAAA,2HAAQ;wCAAC,CAAC,QAAU,MAAM,SAAS;;IAErD,IAAA,0KAAS;8BAAC;YACR,eAAe;gBACb;;gBAEA,MAAM,QAAQ,aAAa,OAAO,CAAC;gBACnC,IAAI,OAAO;oBACT,IAAI;wBACF,MAAM,WAAW,MAAM,oHAAG,CAAC,IAAI,CAAC,EAAE;wBAClC,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE;4BACrC,SAAS;gCACP,IAAI,SAAS,IAAI,CAAC,EAAE;gCACpB,MAAM,SAAS,IAAI,CAAC,IAAI;gCACxB,OAAO,SAAS,IAAI,CAAC,KAAK;gCAC1B,MAAM,SAAS,IAAI,CAAC,IAAI;4BAC1B;4BACA,QAAQ,GAAG,CAAC,yBAAyB;gCAAE,MAAM,SAAS,IAAI,CAAC,IAAI;4BAAC;wBAClE,OAAO;4BACL,aAAa,UAAU,CAAC;4BACxB;wBACF;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,oBAAoB;wBAClC,aAAa,UAAU,CAAC;wBACxB;oBACF;gBACF,OAAO;oBACL;gBACF;YACF;YACA;QACF;6BAAG;QAAC;QAAU;KAAU;IAExB,OAAO;AACT;GArCgB;;QACG,2HAAQ;QACP,2HAAQ;;;KAFZ"}}]
}